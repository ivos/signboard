<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<c:set var="property" value="#{not empty property ? property : id}" />
	<c:set var="required" value="#{not empty required and required}" />
	<c:set var="labelKey" value="#{entity}.#{property}" />
	<c:set var="hintKey" value="#{labelKey}.#{hint}.hint" />

	<h:outputLabel for="#{id}" value="#{label[labelKey]}:" />
	<h:panelGroup>
		<c:choose>
			<c:when test="#{type == 'output'}">
				<h:outputText id="#{id}" value="#{bean[property]}" />
			</c:when>
			<c:when test="#{type == 'text'}">
				<h:inputText id="#{id}" value="#{bean[property]}"
					label="#{label[labelKey]}">
					<ui:insert />
					<c:if test="#{customAjaxValidation != true}">
						<rich:validator event="blur" />
					</c:if>
				</h:inputText>
			</c:when>
			<c:when test="#{type == 'password'}">
				<h:panelGroup>
					<h:inputSecret id="#{id}" value="#{bean[property]}"
						label="#{label[labelKey]}">
						<ui:insert />
						<c:if test="#{customAjaxValidation != true}">
							<rich:validator event="blur" />
						</c:if>
					</h:inputSecret>
				</h:panelGroup>
			</c:when>
			<c:when test="#{type == 'select'}">
				<h:panelGroup>
					<h:selectOneMenu id="#{id}" value="#{bean[property]}"
						label="#{label[labelKey]}">
						<f:selectItems value="#{options.entrySet()}" var="entry"
							itemValue="#{entry.key}" itemLabel="#{entry.value}" />
					</h:selectOneMenu>
				</h:panelGroup>
			</c:when>
			<c:otherwise>
				<h:panelGroup>
					<ui:insert />
				</h:panelGroup>
			</c:otherwise>
		</c:choose>
		<c:if test="#{not empty hint}">
			<h:outputText id="#{id}-hint-text" value="#{label[hintKey]}"
				styleClass="hint-text" />
		</c:if>
		<rich:message id="#{id}-message" for="#{id}" />
	</h:panelGroup>
	<h:panelGroup>
		<h:outputText value="*" title="#{label.required}"
			rendered="#{required}" />
		<h:graphicImage id="#{id}-hint-img" value="/resources/help.png"
			onclick="$('span[id$=&quot;#{id}-hint-text&quot;]').slideToggle(300)"
			rendered="#{not empty hint}" />
	</h:panelGroup>

</ui:composition>
